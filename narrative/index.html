<!DOCTYPE html>
<html>
  <head>
    
    <meta charset="UTF-8">
    <title>UNDP-Narrative</title>
    <!--D3-->
    <script src="https://d3js.org/d3.v4.min.js"></script>

    <style> 
    body {
        
    }
    
    </style>
    
  </head>

  <body>
    
    <script>
    
    var margin = {top: 20, right: 10, bottom: 20, left: 30};

    var width = 800 - margin.left - margin.right,
        height = 300 - margin.top - margin.bottom;
        
    var xScale = d3.scaleLinear()
        .range([0, width])
        .domain([1976, 2015]);

    var yScale = d3.scaleLinear()
        .range([height, 0])
        .domain([0, 100]);
        
    var xAxis = d3.axisTop()
        .tickFormat(d3.format("d"))
        .scale(xScale);
    
    var yAxis = d3.axisLeft()
        .scale(yScale);
    
    // var generateLine = d3.svg.line()
    //     .x(function(d) { return xScale(d.year); })
    //     .y(function(d) { return yScale(d.val); });
    
d3.queue()
    // .defer(d3.json, "data/pitf.json")
    // .defer(d3.json, "data/pts.json")
    // .defer(d3.json, "data/wiid.json")
    .defer(d3.json, "data/pts+wiid.json")
    .awaitAll(ready);
    
function ready(error, results) {
  if (error) throw error;
  // console.log(results);
  drawCharts(results[0]);
}


function drawCharts(data) {
  console.log('entries');
  console.log(d3.entries(data));
  
  data = d3.entries(data);
  
  body = d3.select('body');

  var svg = body.selectAll('svg')
      .data(data)
      .enter()
      .append('svg')
        .attr('width', width)
        .attr('height', height)
        .each(function(d) {
          // console.log(d);
          
          //   var firstLetter = d['Country Name'].toUpperCase().charAt(0);
          
          d3.select(this).append('text')
            .text(d.key)
            .attr('x', 25)
            .attr('y', 25);
          
          var years = d3.entries(d.value.years);
          
          console.log(years);
          
          // CONDITIONALS
          //   if (firstLetter == 'B') {
          //     d3.select(this)
          //       .attr('style', 'border: 2px solid blue;');
          //   }
          
          // var mapX = d3.scaleLinear().domain([0,24]).range([0,width]);
          // var mapY = d3.scaleLinear().domain([0,100]).range([height,0]);
          
          // for(var i=0; i<24; i++) {

          //   d3.select(this)
          //     .append('circle')
          //       .attr('cx', mapX(i)) 
          //       // .attr('cy', mapY(d[1990+i])) 
          //       .attr('cy', function(){ return mapY(d[Object.keys(d)[i]]); })
          //       .attr('r', 3)
          //       .on('mouseover', function() {
          //         d3.select(this).style('fill', 'green');
          //       })
                
          // // console.log(d[Object.keys(d)[i]]);
              
          });
    
  }
    



    
    </script>
  </body>
